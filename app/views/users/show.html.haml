= content_for :breadcrumb do
  &gt;
  = link_to "Benutzer", users_path
  &gt;
  = link_to @user.firstname+' '+@user.lastname, user_path(@user)
  
.edit_button{:style => "float: right"}
  = button_to "Bearbeiten", edit_user_path(@user), :method => :get
  
%h1
  = @user.firstname+' '+@user.lastname
  
%table
  %tr
    %td Telefon
    %td= @user.phone
  %tr
    %td Geschlecht
    %td= {'m' => 'männlich', 'f' => 'weiblich', '?' => "keine Angabe" }[@user.gender]
  
  %tr
    %td Matrikelnummer
    %td= @user.matrikel
  %tr
    %td E-Mail
    %td= link_to @user.email, "mailto:#{@user.email}"
  %tr
    %td Rolle
    %td= User.roles.invert[@user.role]
  %tr
    %td Studiengang
    %td= @user.study.name if @user.study
  %tr
    %td Abschluss(-ziel)
    %td= @user.degree  
  %tr
    %td Studienbegin
    %td= "#{@user.begin_month}/#{@user.begin_year}"
  %tr
    %td Land
    %td= @user.country_name
  %tr
    %td Sprachkenntnisse
    %td= @user.languages.join(',')
  %tr
    %td Beruf
    %td=  @user.profession.name if @user.profession

- if @user.deleted?
  .mark{:style=>"color:red"} 
    Dieser Nutzer ist als gelöscht markiert!


  %br

.userinfo
  - ptable = {}; @user.session_participations.each do |sp| ptable[sp.session_id] = sp end
  
  Bisherige Experimentteilnahmen:
  %table
    %tr
      %td
      %td.qtip-generic{:'data-title' => 'Showup'}  S
      %td.qtip-generic{:'data-title' => 'Teilnahme'}  T
      
      
    - @user.participations.includes(:session).joins(:experiment).where("sessions.id = sessions.reference_session_id").order("sessions.start_at").each do |p|
      
      %tr
        %td
          = truncate(p.experiment.name, :length => 60)
          %br
          - ([p.session] + p.session.following_sessions).each do |s|
            = link_to s.time_str, participants_experiment_session_path(p.experiment, s)
            %br
        %td
          %br
          - ([p.session] + p.session.following_sessions).each do |s|
            - if ptable[s.id] && ptable[s.id].showup
              .green-button
            - if ptable[s.id] && ptable[s.id].noshow
              .red-button
            %br
        %td
          %br
          - ([p.session] + p.session.following_sessions).each do |s|
            - if ptable[s.id] && ptable[s.id].participated
              .green-button
            %br
